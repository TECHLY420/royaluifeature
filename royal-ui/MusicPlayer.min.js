volumeSlider = document.getElementById("volume");
// end of arrays
// main index
list = 0;
seeking = false;
audio.src = musicData[list];
$("#album").attr("src", album[list]);
$("#art").html(artist[list]);

// duration slider
seekSlider = document.getElementById("seekSlider");
seekSlider.addEventListener('mousedown', function(event) {
  seek(event);
});
function seek(event) {
  if (audio.duration == 0) {
    null
  } else {
    if (seeking) {
      seekSlider.value = event.clientX - seekSlider.offsetLeft;
      seekto = audio.duration *(seekSlider.value * 100);
      audio.currentTime = seekto;
    }
  }
}
// duration
cur = document.getElementById("cur");
dur = document.getElementById("dur");
audio.addEventListener('timeupdate', () => {
  if (audio.duration) {
    var nt = audio.currentTime * (100 / audio.duration);
    seekSlider.value = nt;
    var curmins = Math.floor(audio.currentTime / 60);
    var cursecs = Math.floor(audio.currentTime - curmins * 60);
    var durmins = Math.floor(audio.duration / 60);
    var dursecs = Math.floor(audio.duration - durmins * 60);
    if (cursecs < 10) {
      cursecs = "0" + cursecs;
    }
    if (dursecs < 10) {
      dursecs = "0" + dursecs;
    }
    if (curmins < 10) {
      curmins = "0" + curmins;
    }
    if (durmins < 10) {
      durmins = "0" + durmins;
    }
    cur.innerHTML = curmins + ":" + cursecs;
    dur.innerHTML = durmins + ":" + dursecs;
  } else {
    cur.innerHTML = "00" + ":" + "00";
    dur.innerHTML = "00" + ":" + "00";
  }
});
// main function
function fatchMusic() {
  audio.src = musicData[list];
  $("#album").attr("src",
    album[list])
  $("#art").html(artist[list])
  $("#playbtn").css("display","none");
  $("#pausebtn").css("display","inline-block");
  $(".cd").css("animation-play-state",
    "running");
  audio.play();
}
// if audio endede next audio play
audio.addEventListener('ended', ()=> {
  fatchMusic();
})
// play button
$("#play-btn").click(()=> {
  if (audio.paused) {
    audio.play();
    $("#playbtn").css("display","none");
    $("#pausebtn").css("display","inline-block");
    $(".cd").css("animation-play-state", "running");
    $(".hand").css("transform", "rotate(48deg)")
  } else {
    audio.pause()
    $("#playbtn").css("display","inline-block");
    $("#pausebtn").css("display","none");
    $(".cd").css("animation-play-state", "paused");
    $(".hand").css("transform", "rotate(25deg)")
  }
});

// prev button
$("#prev").click(()=> {
  list--;
  if (list < 0) {
    list = musicData.length -1;
  }
  fatchMusic()
})

// next button
$("#next").click(()=> {
  list++;
  if (list > musicData.length - 1) {
    list = 0;
  }
  fatchMusic();
});
// audio volume control
function getVolume() {
  audio.volume = volumeSlider.value / 100;
}
// all click icons
$("#volume-btn").click(()=> {
  $("#volume-btn").toggleClass("fa-close fa-volume-up");
  $(".volume-slider").toggleClass("up")
});

var m = 0;
$(".fa-heart").click(()=> {
  if (m == 0) {
    m = 1;
    $(".fa-heart").css("color", "tomato")
  } else {
    m = 0;
    $(".fa-heart").css("color", "#fff")
  }
});
    $(".fa-random").click(()=> {
  if (m == 0) {
    m = 1;
    $(".fa-random").css("color", "#19f")
  } else {
    m = 0;
    $(".fa-random").css("color", "#fff")
  }
});
$(".fa-retweet").click(()=> {
  if (m == 0) {
    m = 1;
    $(".fa-retweet").css("color", "#19f");
  } else {
    m = 0;
    $(".fa-retweet").css("color", "#fff")
  }
});

$("#help").click(()=> {
  if (m == 0) {
    m = 1;
    $(".help").css("bottom", "0");
    $(".min-box").css("background", "rgba(0,0,0,0.5)");
  } else {
    m = 0;
    $(".help").css("bottom", "-100%");
    $(".min-box").css("background", "none");
  }
})
document.onclick = ((e)=> {
  if (e.target.id !== 'min-box' && e.target.id !== 'help') {
    $(".help").css("bottom", "-100%");
    $(".min-box").css("background", "none");
  }
})
